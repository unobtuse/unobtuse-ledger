!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e);var r={environment:{type:"string",required:!1,default:"development",description:"a string specifying which Teller environment to connect to, e.g production"},userId:{type:"string",required:!1,description:"the user you want to associate additional enrollments with."},applicationId:{type:"string",required:!0,description:"your Teller Application ID, as a string"},enrollmentId:{type:"string",required:!1,description:"the ID of the Teller Enrollment to update, as a string"},onInit:{type:"function",required:!1,description:"a function that will be called when the Connect window has finished initializing",default:function(){}},onSuccess:{type:"function",required:!0,description:"a function that will be called after a successful enrollment, with the enrollment object"},onExit:{type:"function",required:!1,description:"a function that will be called when the Connect window has been closed without an enrollment",default:function(){}},onFailure:{type:"function",required:!1,description:"a function that will be called when the Connect window has been closed after a failure",default:function(){}},onUnsupportedInstitution:{type:"function",required:!1,description:"a function that will be called when the user selects an institution not supported by Teller",default:function(){}},onEvent:{type:"function",required:!1,description:"a function that will be called with Connect events tracking user flow",default:function(){}},host:{type:"string",required:!1,description:"the base url for Teller connect endpoints",default:"https://teller.io"},selectAccount:{type:"string",required:!1,default:"disabled",description:"allow users to connect single or multiple accounts"},institution:{type:"string",required:!1,description:"selects a particular institution for the user"},skipPicker:{type:"boolean",required:!1,default:!1,description:"skips the institution picker"},tartanLinkToken:{type:"string",required:!1,description:"the Link token to initialise a Tartan session, as a string"},tartanRedirectUri:{type:"string",required:!1,description:"the redirect URI received after an OAuth flow"},connectToken:{type:"string",required:!1,description:"the Teller Connect token used to continue an API-initiated operation"},onTartanSuccess:{type:"function",required:!1,description:"a function that will be called after a successful Tartan enrollment",default:function(t,e){}},onTartanFailure:{type:"function",required:!1,description:"a function that will be called after a failing error in a Tartan enrollment",default:function(t){}},accountFilter:{type:"object",required:!1,description:"a filter to filter account types and subtypes"},products:{type:"object",required:!1,description:"products requested for enrollment"},nonce:{type:"string",required:!1,description:"an arbitrary token used only once to cryptographically sign the onSuccess payload"},appearance:{type:"string",required:!1,description:"'dark' for dark theme, 'light' for light theme, 'system' to respect the system settings (the default)"}},i={onEnrollment:"onSuccess",onClose:"onExit"},c=function(t){return Object.keys(t).reduce((function(e,n){return t[n].hasOwnProperty("default")&&(e[n]=t[n].default),e}),{})},a=function(t,e){return Object.keys(e).filter((function(t){return e[t].required})).forEach((function(n){if(!t.hasOwnProperty(n))throw new Error("Teller Connect was not passed ".concat(n,", which is a required parameter, it was expecting: ").concat(e[n].description))})),t},u=function(t,e){return Object.keys(t).forEach((function(t){e.hasOwnProperty(t)||console.warn("Teller Connect was passed ".concat(t,", which is not a valid parameter. Is it a typo?"))})),t},s=function(t,e){return Object.keys(t).forEach((function(n){if(e[n]&&o(t[n])!==e[n].type)throw new Error("Teller Connect was passed a invalid value for ".concat(n,", it was expecting: ").concat(e[n].description))})),t},l=function(t,e){return Object.keys(t).forEach((function(n){e[n]&&(console.warn("Teller Connect was passed ".concat(n,", which has been deprecated. Please update your code to use ").concat(e[n])),t[e[n]]=t[n],delete t[n])})),t};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=function(t){return function t(e,n){return Object.keys(e).map((function(o){var r=e[o];if(!r&&(null==r||isNaN(r)))return null;var i=o;switch(e.constructor){case Array:i="".concat(n,"[]");break;case Object:i=n?"".concat(n,"[").concat(o,"]"):o}return"object"===d(r)?t(r,i):"".concat(i,"=").concat(encodeURIComponent(r))})).filter((function(t){return t})).join("&")}(t,void 0)};function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var o,r,i=[],c=!0,a=!1;try{for(n=n.call(t);!(c=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);c=!0);}catch(t){a=!0,r=t}finally{try{c||null==n.return||n.return()}finally{if(a)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var h=function(){return"load_"+Math.random().toString(32).substring(2)};void 0!==window.TellerConnect&&console.warn("Please only use a single Teller Connect embed per-page");var m={version:"0.1.0",setup:function(t){var e=function(t,e,n){var o=c(e),r=Object.assign(o,t);return r=l(r,n),r=u(r,e),r=a(r,e),r=s(r,e)}(t,r,i),n=h();e.onUnsupportedInstitution!==r.onUnsupportedInstitution.default&&(e.includeUnsupportedInstitutions=!0);var o,d,y,m,b,w,v=function(t,e){var n=e.userId,o=e.institution,r=e.skipPicker,i=e.environment,c=e.enrollmentId,a=e.selectAccount,u=e.tartanLinkToken,s=e.tartanRedirectUri,l=e.connectToken,d=e.accountFilter,p=e.products,f=e.nonce,y=e.includeUnsupportedInstitutions,h=e.appearance,m=e.applicationName;return{user_id:n,institution:o,skip_picker:r,origin:window.origin,environment:i,enrollment_id:c,select_account:a,tartan_link_token:u,tartan_redirect_uri:s,connect_token:l,loader_id:t,account_filter:d,products:p,include_unsupported_institutions:y,nonce:f,appearance:h,application_name:m}}(n,e),g=function(t,e,n,o){var r="".concat(o,"/connect"),i=p(n);return"".concat(r,"/").concat(e,"?").concat(i)}(e.environment,e.applicationId,v,e.host),k=(y=!1,m=!1,b=[],w=function(t){var e;null===(e=o.contentWindow)||void 0===e||e.postMessage(t,"*")},{inject:function(t){return new Promise((function(e,n){o=document.createElement("iframe"),Object.assign(o.style,{top:0,right:0,bottom:0,left:0,border:"none",borderWidth:0,position:"fixed",display:"none",overflowY:"auto",overflowX:"hidden",zIndex:9999999999}),o.width="100%",o.height="100%",o.id="teller-connect-window",o.src=t,o.onload=e,document.body.appendChild(o)}))},setReady:function(){m=!0,b.forEach(w),b=[]},open:function(){d=document.body.style,o.style.display="block",y=!0,document.body.style.overflow="hidden",o.contentWindow.focus()},close:function(){o.style.display="none",y=!0,document.body.style.overflow="",Object.entries(d).map((function(t){var e=f(t,2),n=e[0],o=e[1];document.body.style.setProperty(n,o)})),window.parent.focus()},isOpen:function(){return!!y},post:function(t){m?w(t):b.push(t)},destroy:function(){var t;null===(t=o.parentNode)||void 0===t||t.removeChild(o)}}),T=!1;k.inject(g).then((function(){e.onInit()}));var S,j,I=(S=function(t){return t.loaderId===n},j={ready:function(t){k.setReady()},exit:function(t){e.onExit(),k.close()},success:function(t){e.onSuccess(t.data),k.close()},failure:function(t){e.onFailure(t.data),k.close()},unsupportedInstitution:function(t){new Promise((function(n,o){e.onUnsupportedInstitution(t.data,n,o)})).then(k.close).catch((function(){return k.post({action:"unsupportedInstitution"})}))},activityEvent:function(t){e.onEvent(t.data.name,t.data.data)},tartanSuccess:function(t){e.onTartanSuccess(t.data.publicToken,t.data.metadata),k.close()},tartanFailure:function(t){e.onTartanFailure(t.data.metadata)}},function(t){var e;try{e=JSON.parse(t.data)}catch(t){return}if("namespace"in e&&"teller-connect"===e.namespace&&S(e))return j[e.event](e)});window.addEventListener("message",I,!1);return{open:function(t){T?console.warn("This TellerConnect instance was already destroyed. Please set up a new one using TellerConnect.setup()"):(k.post({action:"open",params:t||{}}),k.open())},destroy:function(){T=!0,k.destroy()}}}};window.TellerConnect=m;e.default=m}]);